<h1>{{ 'PREPARE_REPORT.TITLE' | translate }}</h1>
<div *ngIf="item">
    <p>{{item._id}}</p>


    <form [formGroup]="itemForm" class="an-flex an-flex-direction-column">
        <mat-form-field>
            <mat-label>{{ 'ITEM.REPORT.PRODUCT_NAME' | translate}}</mat-label>
            <input matInput placeholder="{{ 'ITEM.REPORT.PRODUCT_NAME' | translate}}" formControlName="productName">
        </mat-form-field>
        <mat-form-field>
            <mat-label>{{ 'ITEM.REPORT.PRODUCT_COLOR' | translate}}</mat-label>
            <input matInput placeholder="{{ 'ITEM.REPORT.PRODUCT_COLOR' | translate}}" formControlName="productColor">
        </mat-form-field>
        <mat-form-field>
            <mat-label>{{ 'ITEM.REPORT.PRODUCT_ID' | translate}}</mat-label>
            <input matInput placeholder="{{ 'ITEM.REPORT.PRODUCT_ID' | translate}}" formControlName="productId">
        </mat-form-field>
        <mat-form-field>
            <mat-select formControlName="factoryInfoId" placeholder="{{ 'ITEM.REPORT.FACTORY' | translate }}">
                <mat-option *ngFor="let factory of factoryItems" [value]="factory._id">
                    {{factory.shortName}}-{{factory.name}}</mat-option>
            </mat-select>
        </mat-form-field>

        <div style="display: flex; flex-direction: row; flex-flow: wrap; " [formGroup]="itemForm">
            <div style="margin: 3px; border: 1px solid black" formArrayName="checklist" 
                *ngFor="let image of checklist?.controls; let i = index">
                <div [formGroupName]="i" style="width: 200px; height: 200px; display: flex;  justify-content: center;">
                    <p>AAA</p>
                </div>
            </div>
        </div>

        <app-images-selector [imagesFormArray]="images" imagesFormArrayName="images" [parentImagesFormGroup]="itemForm" ></app-images-selector>
        <mat-form-field>
            <mat-label>{{ 'ITEM.REPORT.COMMENT' | translate}}</mat-label>
            <input matInput placeholder="{{ 'ITEM.REPORT.COMMENT' | translate}}" formControlName="comment">
        </mat-form-field>
        
    </form>

    <button mat-fab color="primary" class="mat-fab-bottom-right-second" (click)="saveReport()">
        <mat-icon>save</mat-icon>
    </button>
    <button mat-fab color="primary" class="mat-fab-bottom-right" (click)="preview()">
        <mat-icon>rebase_edit</mat-icon>
    </button>
</div>
<div *ngIf="!item">
    <p>Raport nie istnieje.</p>
</div>