<h1>{{ 'PREPARE_REPORT.TITLE' | translate }}</h1>
<div *ngIf="item">
 <p>{{item._id}}</p>


        <form [formGroup]="itemForm" class="an-flex an-flex-direction-column">
            <mat-form-field >
              <mat-label>{{ 'ITEM.REPORT.PRODUCT_ID' | translate}}</mat-label>
              <input matInput placeholder="{{ 'ITEM.REPORT.PRODUCT_ID' | translate}}" formControlName="productId">
            </mat-form-field>

            <mat-form-field >
                <mat-select formControlName="factoryInfoId" placeholder="{{ 'ITEM.REPORT.FACTORY' | translate }}">
                    <mat-option *ngFor="let factory of factoryItems" [value]="factory._id">{{factory.shortName}}-{{factory.name}}</mat-option>
                </mat-select>
            </mat-form-field>

            <button mat-fab (click)="fileInput.click()">
                <mat-icon>library_add</mat-icon>
                <span>Select</span>
                <input #fileInput type="file" (change)="onFileInput($event)" style="display:none;"
                accept="image/x-png,image/jpeg,image/gif"  multiple="multiple" />
            </button>
        
            <div style="display: flex; flex-direction: row; flex-flow: wrap; " >
                <div style="margin: 3px" formArrayName="images" *ngFor="let image of images?.controls; let i = index">
                    <div [formGroupName]="i" > 
                        <img  [src]="blobToSrc(image.get('blob').value)" 
                            width="100" height="100"/>
                    </div>
                </div>
            </div> 
                    <!--[formControl]="image" formControlName="blob"-->

            <!-- <img id="output" [src]="file0src" width="100" height="100"> -->

            <!-- <mat-form-field class="example-full-width">
                <mat-list>
                    <mat-list-item *ngFor="let item of report.checklist">
                    <p matLine>
                        <span> {{item.content}} </span>
                        <span> {{item.isChecked}} </span>
                    </p>
                    </mat-list-item>
                </mat-list>

            </mat-form-field>-->
        </form>

        <button mat-fab color="primary"  class="mat-fab-bottom-right-second" (click)="saveReport()" >
            <mat-icon>save</mat-icon>
        </button>
        <button mat-fab color="primary"  class="mat-fab-bottom-right" (click)="generateReport()" >
            <mat-icon>rebase_edit</mat-icon>
        </button>
</div>
<div *ngIf="!item">
    <p>Raport nie istnieje.</p>
</div>